(this["webpackJsonpgoit-react-hw-09-phonebook"]=this["webpackJsonpgoit-react-hw-09-phonebook"]||[]).push([[0],{116:function(t,e,n){t.exports={card:"NotificationNumberExist_card__18s3x"}},117:function(t,e,n){t.exports={enter:"Animation_enter__13QLD",enterActive:"Animation_enterActive__wkeCp",exit:"Animation_exit__GaSXQ",exitActive:"Animation_exitActive__3iM1W"}},123:function(t,e,n){t.exports={enter:"ContactsAnimation_enter__Aj8Vv",enterActive:"ContactsAnimation_enterActive__3TDx5",exit:"ContactsAnimation_exit__3GT3M",exitActive:"ContactsAnimation_exitActive__3absw"}},22:function(t,e,n){"use strict";n.d(e,"b",(function(){return C})),n.d(e,"a",(function(){return U})),n.d(e,"c",(function(){return R}));var r,c,a,o,i=n(8),s=Object(i.b)("auth/registerRequest"),u=Object(i.b)("auth/registerSuccess"),l=Object(i.b)("auth/registerError"),b=Object(i.b)("auth/loginRequest"),j=Object(i.b)("auth/loginSuccess"),d=Object(i.b)("auth/loginError"),O={registerRequest:s,registerSuccess:u,registerError:l,logoutRequest:Object(i.b)("auth/logoutRequest"),logoutSuccess:Object(i.b)("auth/logoutSuccess"),logoutError:Object(i.b)("auth/logoutError"),loginRequest:b,loginSuccess:j,loginError:d,getCurrentUserRequest:Object(i.b)("auth/getCurrentUserRequest"),getCurrentUserSuccess:Object(i.b)("auth/getCurrentUserSuccess"),getCurrentUserError:Object(i.b)("auth/getCurrentUserError")},f=n(9),p=n(20),h={name:null,email:null},m=Object(i.c)(h,(r={},Object(f.a)(r,O.registerSuccess,(function(t,e){return e.payload.user})),Object(f.a)(r,O.loginSuccess,(function(t,e){return e.payload.user})),Object(f.a)(r,O.logoutSuccess,(function(){return h})),Object(f.a)(r,O.getCurrentUserSuccess,(function(t,e){return e.payload})),r)),x=Object(i.c)(null,(c={},Object(f.a)(c,O.registerSuccess,(function(t,e){return e.payload.token})),Object(f.a)(c,O.loginSuccess,(function(t,e){return e.payload.token})),Object(f.a)(c,O.logoutSuccess,(function(){return null})),c)),g=function(t,e){return e.payload},v=Object(i.c)(null,(a={},Object(f.a)(a,O.registerError,g),Object(f.a)(a,O.loginError,g),Object(f.a)(a,O.logoutError,g),Object(f.a)(a,O.getCurrentUserError,g),a)),_=Object(i.c)(!1,(o={},Object(f.a)(o,O.registerSuccess,(function(){return!0})),Object(f.a)(o,O.loginSuccess,(function(){return!0})),Object(f.a)(o,O.getCurrentUserSuccess,(function(){return!0})),Object(f.a)(o,O.registerError,(function(){return!1})),Object(f.a)(o,O.loginError,(function(){return!1})),Object(f.a)(o,O.getCurrentUserError,(function(){return!1})),Object(f.a)(o,O.logoutSuccess,(function(){return!1})),o)),C=Object(p.c)({user:m,isAuthenticated:_,token:x,error:v}),y=n(27),k=n.n(y),w=n(45),S=n(28),A=n.n(S),N=function(t){A.a.defaults.headers.common.Authorization="Bearer ".concat(t)},E=function(){A.a.defaults.headers.common.Authorization=""},U={register:function(t){return function(){var e=Object(w.a)(k.a.mark((function e(n){var r;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n(O.registerRequest()),e.prev=1,e.next=4,A.a.post("/users/signup",t);case 4:r=e.sent,N(r.data.token),n(O.registerSuccess(r.data)),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(1),console.log("\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0443\u0432\u0435\u0434\u043e\u043c\u043b\u0435\u043d\u0438\u0435 \u043e\u0431 \u043e\u0448\u0438\u0431\u043a\u0435 \u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u0438 \u0438 \u0435\u0435 \u043f\u0440\u0438\u0447\u0438\u043d\u0435(\u0438\u0437 \u043e\u0442\u0432\u0435\u0442\u0430 \u0441\u0435\u0440\u0432\u0435\u0440\u0430)",e.t0),n(O.registerError(e.t0.message));case 13:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}()},logOut:function(){return function(){var t=Object(w.a)(k.a.mark((function t(e){return k.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e(O.logoutRequest()),t.prev=1,t.next=4,A.a.post("/users/logout");case 4:E(),e(O.logoutSuccess()),t.next=12;break;case 8:t.prev=8,t.t0=t.catch(1),console.log("\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0443\u0432\u0435\u0434\u043e\u043c\u043b\u0435\u043d\u0438\u0435 \u043e\u0431 \u043e\u0448\u0438\u0431\u043a\u0435 \u0432\u044b\u0445\u043e\u0434\u0430 \u0438 \u0435\u0435 \u043f\u0440\u0438\u0447\u0438\u043d\u0435(\u0438\u0437 \u043e\u0442\u0432\u0435\u0442\u0430 \u0441\u0435\u0440\u0432\u0435\u0440\u0430)",t.t0),e(O.logoutError(t.t0.message));case 12:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e){return t.apply(this,arguments)}}()},logIn:function(t){return function(){var e=Object(w.a)(k.a.mark((function e(n){var r;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n(O.loginRequest()),e.prev=1,e.next=4,A.a.post("/users/login",t);case 4:r=e.sent,N(r.data.token),n(O.loginSuccess(r.data)),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),n(O.loginError(e.t0.message));case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}()},getCurrentUser:function(){return function(){var t=Object(w.a)(k.a.mark((function t(e,n){var r,c,a;return k.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=n(),c=r.auth.token){t.next=3;break}return t.abrupt("return");case 3:return N(c),e(O.getCurrentUserRequest()),t.prev=5,t.next=8,A.a.get("/users/current");case 8:a=t.sent,e(O.getCurrentUserSuccess(a.data)),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(5),e(O.getCurrentUserError(t.t0.message));case 15:case"end":return t.stop()}}),t,null,[[5,12]])})));return function(e,n){return t.apply(this,arguments)}}()}},R={getIsAuthenticated:function(t){return t.auth.isAuthenticated},getUsername:function(t){return t.auth.user.name},getUseremail:function(t){return t.auth.user.email}}},249:function(t,e,n){"use strict";n.r(e);var r=n(0),c=n(13),a=n.n(c),o=n(31),i=n(14),s=n(115),u=n(17),l=n(22),b=n(50),j=n(63),d=function(t){return t.contacts.items},O=function(t){return t.contacts.filter},f=Object(j.a)([d,O],(function(t,e){var n=e.toLowerCase();return t.filter((function(t){var e=t.name,r=t.number;return e.toLowerCase().includes(n)||String(r).includes(n)}))})),p=n(27),h=n.n(p),m=n(45),x=n(28),g=n.n(x),v=n(8),_=Object(v.b)("app/initStateRequest"),C=Object(v.b)("app/initStateSuccess"),y=Object(v.b)("app/initStateError"),k=Object(v.b)("form/addContactRequest"),w=Object(v.b)("form/addContactSuccess",(function(t){return{payload:t}})),S=Object(v.b)("form/addContactError"),A=Object(v.b)("contact/delContactRequest"),N=Object(v.b)("contact/delContactSuccess"),E=Object(v.b)("contact/delContactError"),U=(Object(v.b)("contact/filterContacts"),Object(v.b)("contact/changeFilter"));g.a.defaults.baseURL="https://goit-phonebook-api.herokuapp.com";var R,q,T={addContact:function(t){return function(e){e(k()),g.a.post("/contacts",t).then((function(t){var n=t.data;return console.log(n)||e(w(n))})).catch((function(t){return e(S(t.massage))}))}},delContact:function(t){return function(e){e(A()),g.a.delete("/contacts/".concat(t)).then((function(){return e(N(t))})).catch((function(t){return e(E(t.massage))}))}},fetchContacts:function(){return function(){var t=Object(m.a)(h.a.mark((function t(e){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e(_()),t.next=3,g.a.get("/contacts").then((function(t){var n=t.data;return e(C(n))})).catch((function(t){return e(y(t.massage))}));case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}},M=n(293),F=n(116),L=n.n(F),I=n(2),D=function(t){var e=t.message;return Object(I.jsx)("p",{className:L.a.card,children:e})},z=n(117),P=n.n(z),W=n(41),Q=n.n(W),B=n(118),G=n.n(B),J=function(t){return G.a.isMobilePhone(t,"uk-UA")},V=n(290),X=n(294),H=function(t){var e=t.closeModal,n=Object(r.useState)(""),c=Object(b.a)(n,2),a=c[0],o=c[1],s=Object(r.useState)(""),u=Object(b.a)(s,2),l=u[0],j=u[1],O=Object(r.useState)(!1),f=Object(b.a)(O,2),p=f[0],h=f[1],m=Object(i.d)((function(t){return d(t)})),x=Object(i.c)(),g=function(t){var e=t.target,n=e.name,r=e.value;switch(n){case"name":o(r);break;case"number":j(r);break;default:return}};return Object(I.jsxs)(I.Fragment,{children:[Object(I.jsx)("div",{className:"heading",children:Object(I.jsx)(M.a,{in:p,timeout:500,classNames:P.a,unmountOnExit:!0,children:Object(I.jsx)(D,{message:"The contact is already exists."})})}),Object(I.jsxs)("form",{className:Q.a.form,onSubmit:function(t){var n={name:a,number:l};if(t.preventDefault(),m.some((function(t){return t.number===n.number})))return h(!0),void setTimeout((function(){h(!1)}),500);!0===J(l)?(o(a),j(l),x(T.addContact(n)),o(""),j(""),e()):alert("Enter correct number, please")},children:[Object(I.jsx)("label",{className:Q.a.label,children:Object(I.jsx)(V.a,{className:Q.a.input,type:"text",name:"name",placeholder:"Enter the name",value:a,onChange:g,required:!0,variant:"outlined"})}),Object(I.jsxs)("label",{className:Q.a.label,children:[Object(I.jsx)(V.a,{className:Q.a.input,type:"number",name:"number",placeholder:"+380",value:l,maxLength:"13",onChange:g,required:!0,variant:"outlined"}),Object(I.jsx)("span",{className:Q.a.rule})]}),Object(I.jsx)("button",{className:Q.a.button,disabled:!1,children:Object(I.jsx)(X.a,{variant:"contained",color:"primary",children:"Add contact"})})]})]})},K=n(296),Z=n(73),Y=n.n(Z),$=n(123),tt=n.n($),et=n(124),nt=n.n(et),rt=function(t){var e=t.contacts,n=t.onDelete;return Object(I.jsx)("div",{children:Object(I.jsx)(K.a,{component:"ul",className:Y.a.list,children:e.map((function(t,e){return Object(I.jsx)(M.a,{timeout:250,classNames:tt.a,children:Object(I.jsxs)("li",{className:Y.a.item,children:["".concat(t.name,": ").concat(t.number),Object(I.jsx)("button",{className:Y.a.button,onClick:function(){return n(t.id)},children:Object(I.jsx)(nt.a,{color:"disabled"})})]},e)},e)}))})})},ct=n(83),at=n.n(ct),ot=function(){var t=Object(i.d)((function(t){return O(t)})),e=Object(i.c)();return Object(I.jsx)("label",{className:at.a.label,children:Object(I.jsx)("div",{children:Object(I.jsx)(V.a,{className:at.a.input,type:"text",name:"filter",placeholder:"Find contacts by name",value:t,onChange:function(t){return e(U(t.target.value))},variant:"outlined"})})})},it=n(84),st=n.n(it),ut=function(t){var e=t.children,n=t.handleKeyDown,c=t.closeModal;Object(r.useEffect)((function(){window.addEventListener("keydown",n)}),[n]);return Object(I.jsx)("div",{className:st.a.Overlay,onClick:function(t){t.currentTarget===t.target&&c()},children:Object(I.jsx)("div",{className:st.a.Modal,children:e})})},lt=Object(i.b)((function(t){return{contacts:f(t)}}),(function(t){return{initContacts:function(){return t(T.fetchContacts())},delContact:function(e){return t(T.delContact(e))}}}))((function(t){var e=t.initContacts,n=t.initialValue,c=t.filter,a=t.contacts,o=t.delContact,i=Object(r.useState)(!1),s=Object(b.a)(i,2),u=s[0],l=s[1],j=function(t){"Escape"===t.code&&l(!1)};Object(r.useEffect)((function(){e(),window.addEventListener("keydown",j)}),[j,e]);var d=function(){l(!u)},O=function(){l(!1)};return Object(I.jsxs)("div",{children:[Object(I.jsx)(X.a,{style:{margin:"10px auto 10px auto"},onClick:d,variant:"contained",color:"primary",children:"New contact"}),Object(I.jsx)("br",{}),Object(I.jsx)(ot,{value:n,onChangeFilter:c}),Object(I.jsx)(rt,{contacts:a,onDelete:o}),Object(I.jsx)(r.Fragment,{children:u&&Object(I.jsx)(ut,{onClose:d,closeModal:O,children:Object(I.jsx)(H,{closeModal:O})})})]})})),bt=n(253),jt=n(285),dt=n(52),Ot=n(125),ft=n.n(Ot),pt=n(286),ht=n(284),mt=Object(ht.a)((function(t){return{root:{display:"flex",width:"100%","& > *":{margin:t.spacing(1)}},link:{textDecoration:"none",color:"#fff"},item:{margin:"auto 15px auto 15px",color:"#fff"}}})),xt=function(){var t=Object(i.d)((function(t){return l.c.getIsAuthenticated(t)})),e=Object(dt.a)(),n=mt();return Object(I.jsxs)(jt.a,{theme:e,children:[Object(I.jsxs)(o.b,{className:"s.link",to:"/",exact:!0,children:[Object(I.jsx)(ft.a,{className:n.link}),Object(I.jsx)("span",{role:"img","aria-label":"\u0418\u043a\u043e\u043d\u043a\u0430 \u043f\u0440\u0438\u0432\u0435\u0442\u0441\u0442\u0432\u0438\u044f"})]}),t&&Object(I.jsx)(o.b,{to:"/contacts",exact:!0,children:Object(I.jsx)(bt.a,{variant:"h6",className:n.link,children:Object(I.jsx)(pt.a,{className:n.item,component:"button",variant:"h6",color:"initial",children:"Contacts"})})})]})},gt=n(297),vt=n(291),_t=n(126),Ct=n.n(_t),yt=Object(ht.a)((function(t){return{root:{"& > *":{margin:t.spacing(1)}},wrap:{display:"flex",marginLeft:"auto"},nameWrap:{display:"flex",flexDirection:"column-reverse"},small:{margin:"5px auto 5px auto",width:t.spacing(4),height:t.spacing(4),fontSize:"10px"},item:{whiteSpace:"nowrap",margin:"auto 0px auto 15px"},button:{padding:"0px 0px 0px 0px",margin:"auto 0px auto 15px",backgroundColor:"transparent"}}})),kt=function(){var t=Object(i.d)((function(t){return l.c.getUsername(t)})),e=Object(i.c)(),n=Object(dt.a)(),r=yt();return Object(I.jsx)(jt.a,{theme:n,children:Object(I.jsxs)("div",{className:r.wrap,children:[Object(I.jsxs)("div",{className:r.nameWrap,children:[Object(I.jsx)(vt.a,{variant:"h6",className:r.title,children:t}),Object(I.jsx)(gt.a,{className:r.small,alt:t,src:"../../images/defaultAvatar.jpg"})]}),Object(I.jsx)("div",{className:r.root,children:Object(I.jsx)(X.a,{type:"button",onClick:function(){return e(l.a.logOut())},variant:"contained",color:"primary",children:Object(I.jsx)(Ct.a,{})})})]})})},wt=n(287),St=Object(ht.a)((function(t){return{root:{display:"flex",width:"100%","& > *":{margin:t.spacing(1)}},wrap:{display:"flex",margin:"0px  auto 0px 0px"},link:{textDecoration:"none",color:"#fff"},item:{margin:"auto 15px auto 15px",color:"#fff"}}})),At=function(){var t=Object(dt.a)(),e=St();return Object(I.jsx)(jt.a,{theme:t,children:Object(I.jsxs)(wt.a,{className:e.wrap,maxWidth:"lg",children:[Object(I.jsx)(o.b,{to:"/register",exact:!0,children:Object(I.jsx)(bt.a,{variant:"h6",className:e.link,children:Object(I.jsx)(pt.a,{className:e.item,component:"button",variant:"h6",color:"initial",children:"Register"})})}),Object(I.jsx)(o.b,{to:"/login",exact:!0,children:Object(I.jsx)(bt.a,{variant:"h6",className:e.link,children:Object(I.jsx)(pt.a,{className:e.item,component:"button",variant:"h6",color:"initial",children:"Login"})})})]})})},Nt=n(288),Et=n(289),Ut=Object(ht.a)((function(t){return{wrap:{display:"flex",alignItems:"center",justifyContent:"space-between",width:"100%",margin:"0px 0px 0px 0px ",padding:"5px 0px 5px 0px"}}})),Rt=function(){var t=Object(i.d)((function(t){return l.c.getIsAuthenticated(t)})),e=Object(dt.a)();Ut();return Object(I.jsx)(jt.a,{theme:e,children:Object(I.jsx)(Nt.a,{position:"static",children:Object(I.jsxs)(Et.a,{children:[Object(I.jsx)(xt,{}),t?Object(I.jsx)(kt,{}):Object(I.jsx)(At,{})]})})})},qt="/",Tt="/register",Mt="/login",Ft="/contacts",Lt=n(40),It=n(72),Dt=Object(i.b)((function(t){return{isAuthenticated:l.c.getIsAuthenticated(t)}}))((function(t){var e=t.component,n=t.isAuthenticated,r=t.redirectTo,c=Object(It.a)(t,["component","isAuthenticated","redirectTo"]);return Object(I.jsx)(u.b,Object(Lt.a)(Object(Lt.a)({},c),{},{render:function(t){return n?Object(I.jsx)(e,Object(Lt.a)({},t)):Object(I.jsx)(u.a,{to:r})}}))})),zt=Object(i.b)((function(t){return{isAuthenticated:l.c.getIsAuthenticated(t)}}))((function(t){var e=t.component,n=t.isAuthenticated,r=t.redirectTo,c=Object(It.a)(t,["component","isAuthenticated","redirectTo"]);return Object(I.jsx)(u.b,Object(Lt.a)(Object(Lt.a)({},c),{},{render:function(t){return n&&c.restricted?Object(I.jsx)(u.a,{to:r}):Object(I.jsx)(e,Object(Lt.a)({},t))}}))})),Pt={errorPopup:Object(v.b)("error/showNotification")},Wt=n(9),Qt=Object(v.c)({message:"",error:""},Object(Wt.a)({},Pt.errorPopup,(function(t,e){return e.payload}))),Bt=Object(r.lazy)((function(){return n.e(3).then(n.bind(null,300))})),Gt=Object(r.lazy)((function(){return n.e(5).then(n.bind(null,298))})),Jt=Object(r.lazy)((function(){return n.e(4).then(n.bind(null,299))})),Vt=function(t){t.error,t.authError,t.showNotification,t.filter;var e=Object(i.d)((function(t){return t.notification})),n=Object(i.c)();Object(r.useEffect)((function(){n(l.a.getCurrentUser())}),[]);var c=Object(dt.a)();return Object(I.jsxs)(jt.a,{theme:c,children:[Object(I.jsx)(Rt,{}),Object(I.jsxs)(r.Suspense,{fallback:Object(I.jsx)("p",{children:"Loading..."}),children:[" ",Object(I.jsxs)(u.d,{children:[Object(I.jsx)(u.b,{exact:!0,path:qt,component:Bt}),Object(I.jsx)(zt,{restricted:!0,redirectTo:"/login",path:Mt,component:Jt}),Object(I.jsx)(zt,{restricted:!0,redirectTo:"/register",path:Tt,component:Gt}),Object(I.jsx)(Dt,{redirectTo:"/contacts",path:Ft,component:lt}),Object(I.jsx)(u.a,{to:qt})]})]}),e.message&&Object(I.jsx)("div",{style:{backgroundColor:"red",color:"#fff",padding:"15px",position:"absolute"},children:Object(I.jsxs)("span",{children:[Object(I.jsx)("div",{onClick:n(Pt.errorPopup({message:"",error:""})),children:"X"}),e.message]})})]})},Xt=n(71),Ht=n(20),Kt=Object(v.c)([],(R={},Object(Wt.a)(R,C,(function(t,e){return e.payload})),Object(Wt.a)(R,w,(function(t,e){return[e.payload].concat(Object(Xt.a)(t))})),Object(Wt.a)(R,N,(function(t,e){var n=e.payload;return t.filter((function(t){return t.id!==n}))})),R)),Zt=Object(v.c)(!1,(q={},Object(Wt.a)(q,_,(function(){return!0})),Object(Wt.a)(q,C,(function(){return!1})),Object(Wt.a)(q,y,(function(){return!1})),Object(Wt.a)(q,A,(function(){return!0})),Object(Wt.a)(q,N,(function(){return!1})),Object(Wt.a)(q,E,(function(){return!1})),Object(Wt.a)(q,k,(function(){return!0})),Object(Wt.a)(q,w,(function(){return!1})),Object(Wt.a)(q,S,(function(){return!1})),q)),Yt=Object(v.c)("",Object(Wt.a)({},U,(function(t,e){return e.payload}))),$t=Object(Ht.c)({items:Kt,filter:Yt,loading:Zt}),te=n(37),ee=n(127),ne=n.n(ee),re=Object(Xt.a)(Object(v.d)({serializableCheck:{ignoredActions:[te.a,te.f,te.b,te.c,te.d,te.e]}})),ce={key:"auth",storage:ne.a,whitelist:["token"]},ae=Object(v.a)({reducer:{auth:Object(te.g)(ce,l.b),contacts:$t,notification:Qt},loading:$t,middleware:re,devTools:!1}),oe={store:ae,persistor:Object(te.h)(ae)},ie=n(292);a.a.render(Object(I.jsx)(i.a,{store:oe.store,children:Object(I.jsx)(s.a,{loading:null,persistor:oe.persistor,children:Object(I.jsx)(o.a,{children:Object(I.jsx)(ie.b,{injectFirst:!0,children:Object(I.jsx)(Vt,{})})})})}),document.getElementById("root"))},41:function(t,e,n){t.exports={form:"Form_form__1fdti",label:"Form_label__Of5OE",input:"Form_input__8oCOn",button:"Form_button__HPsc9"}},73:function(t,e,n){t.exports={list:"Contacts_list__8vroI",item:"Contacts_item__Pjis0",button:"Contacts_button__hbW6U","item-enter":"Contacts_item-enter__ZcyTO","item-enter-active":"Contacts_item-enter-active__39yA6"}},83:function(t,e,n){t.exports={input:"Filter_input__3mxRQ"}},84:function(t,e,n){t.exports={Overlay:"Modal_Overlay__2xg8W",Modal:"Modal_Modal__3tI5L"}}},[[249,1,2]]]);
//# sourceMappingURL=main.ef7c9392.chunk.js.map